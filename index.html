<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>로그인 샘플</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body class="text-center vsc-initialized">
<main class="form-signin d-flex row" style="width: 70%; margin-left: auto; margin-right: auto; margin-top: 10%;">
    <div>
        <h1 class="h3 mb-3 fw-normal">로그인 샘플</h1>
        <div class="form-floating">
            <input id="id" autocomplete="off" type="email" class="form-control" id="floatingInput" placeholder="name@example.com">
            <label for="floatingInput">ID</label>
        </div>
        <div class="form-floating">
            <input id="password" type="password" class="form-control" id="floatingPassword" placeholder="Password">
            <label for="floatingPassword">Password</label>
        </div>
        <button class="w-100 btn btn-lg btn-primary" id="onSubmit">Sign in</button>
        <p class="mt-5 mb-3 text-muted">© 2023</p>
    </div>
    <script>
        document.getElementById('onSubmit').addEventListener('click', ()=>{
            axios.post('https://wtdhqxavjk.execute-api.us-east-2.amazonaws.com/auth/', {
                id: document.getElementById('id').value,
                password: document.getElementById('password').value
            })
                .then((response) => {
                    // MARK 200 success
                    if(response.status === 200) {
                        location.href = `./main.html?name=${response.data.name}`
                    }
                })
                .catch((error) => {
                    // MARK: 403 not authorized
                    if(error.response.status === 403) {
                        alert('아이디 혹은 비밀번호를 확인해주세요')
                    }
                });
        })
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</main>
</body>
</html>